=== storyline ===
Contributors: Edward de Groot, Donnie Marges, Waheed Ashraf, Keith Benedict, Goldwin Guenther, Chris Murphy
Tested up to: 3.9-beta1-27501
Stable tag: 0.5.1
License: MIT
License URI: https://github.com/Postmedia/storyline/blob/master/LICENSE

== Description ==

Supports mobile story elements

== Installation ==

Activate the plugin, Access the storyline menu off the main dashboard.

== Settings ==

Update Urban Airship settings as well as Twitter API settings.
Settings > Storyline

== Storyline preview helper ==

To utilize the storyline preview functionality, modify the content.php file of your theme to look for storyline, if installed we call the smrt_storyline_with_preview
method.

    if ( !defined( 'SMRT_STORYLINE_VERSION' ) ) {
      the_content( __( 'Continue reading <span class="meta-nav">&rarr;</span>', 'twentyfourteen' ) );
    }
    else {
      smrt_storyline_with_preview();
    }
    
 
Add this to functions.php to remove post_format=standard from querystring

    function smrt_post_format_parameter( $url ) {
      $url = remove_query_arg( 'post_format', $url );
      return $url;
    }
    add_filter( 'preview_post_link', 'smrt_post_format_parameter', 9999 );


Load VIP shared plugin library

    wpcom_vip_require_lib( 'codebird' );
  
      
== Urban Airship Update notification message ==

{
  "audience": {"tag":"POSTID"},
  "notification": {
    "ios": {
      "alert":"Updated story - HEADLINE","extra":{"url":"POSTID"}
    },
    "android":{
      "alert":"Updated story - HEADLINE","extra":{"url":"POSTID"}
    }
  },
  "device_types":["ios","android"]
}


== Changelog ==

= 0.5.1 =
* Added Topic management, preview updates and shortcode dropdown
* Added Jquery to storyline preview as it is no longer included in web template
* Added No Thumbail checkbox to storyline post edit
* Update twitter hidden control character filter
* Add shortcode tag for Red Frog (Kaltura) player

= 0.5.0 =
* Added shortcode support for kaltura video. 
* Strip hidden/control characters from tweet after processing.

= 0.4.9 =
* Cache twitter data from codebird calls. Rate limiting affecting response.

= 0.4.8 =
* Updated Storyline web preview. Preview should closely represent how the iPhone4 looks.

= 0.4.7 =
* Update Storyline Settings. Combine Twitter & Urban Airship settings under the same settings option.

= 0.4.6 = 
* Remove zoninator support. Button now available in Storyline post to send broadcast alert.

= 0.4.5 =
* Added button to Storyline post to send Breaking News alerts through Urban Airship v3 to everyone (broadcast).

= 0.4.4 = 
* Added helper function for formatting twitter tweet text

= 0.4.3 =
* Updated twitter embed html. Added type option for vine.

= 0.4.2 =
* Implemented twitter shortcode support through VIP shared plugin 'codebird'.

= 0.4.1 =
* Changed 'return $content;' to 'echo $content;' for preview. Moved pd.shortcode processing to 'add_content' filter so anything that uses storyline posts will get rendered html. Update to twitter embed code html output.

= 0.4.0 =
* Added escaping/validation, url whitelist, extra shortcodes.

= 0.3.9 =
* Update to alert.js. Removed strong type comparison on UA response code. Sometimes is a number sometimes is a string...

= 0.3.8 =
* Added filtering for our custom shortcodes [pd:{embed name} attributes]

= 0.3.7 =
* Added additional sorting for when storyline posts have the same date '2014-02-01' and order set to '0'... so that those items obey the order.

= 0.3.6 =
* new filter to add storyline id to embedded links

= 0.3.5 =
* Handles embedding of non-wordpress images
* no longer breaks on no featured image
* filters are now applied to each story element (slide) requires preview to be executed from theme with helper method smrt_storyline_with_preview()
* Changed the alert notification message to include the story title
* Added "extra" field on alert to include the postID in the "url" extra, this maps to same field were using on broadcasts
 to simplify client check (intval of "url == int is a story in the app, otherwise URL to external post" )
* removed support for zoninator

= 0.3.4 =
* content cleanup fix
* VIP spacing fix
* Added custom featured image credit field
* target main view ad codes to news
* main ad codes are now topical

= 0.3.3 =
* Updated date_sort to ensure unique sort field and consistency in app
* Moved ad code functionality to plugin from api
* added support for zoninator

= 0.3.2 =
* Add menu order to storyline list dashboard
* Order by date and menu_order (applied to admin screens and output)
* Improved and hardened custom sort
* Updated date_sort
* Removed support for editions, now handled by custom orderby
* Added ability to query multiple posts by ID
* Allow for 100 following posts to be returned

= 0.3.1 =
* Added an updated checkmark under the metabox for pushing alerts
* Added updated meta field to json feed

= 0.3.0 =
* Removed nopaging
* Added verification on $callback parameter as safe word
* Added transient cache on smrt_topics_callback
* Includes change to make callback parameter on smrt_topics_callback optional

= 0.2.9 =
* Changed sanitize to escape function in smrt_topics_callback
* escaped output of smrt_push_ua_update_callback
* nonce added to smrt_push_ua_update_callback
* changed to new sort via editions param, removed use of meta data in query sort
* changed wp_get_post_terms to get_the_terms
* fixed output escaping on story_headline $post->post_title
* added comment and renamed $header to $hardcoded_header and did same to the $adbanner var.
* moved add_image_size to seperate function hooked in on after_setup_theme
* lowercase a on array() declare
* added comment on the non-standard priority,
* changed the add_image_url function, returns image url and doesnt modify $item
* removed $allowed_tags as currently unused


= 0.2.8 =

* Added urban airship support


= 0.2.7 =

* bug fixes for embedded images
* Change refactor to only happen for feeds and preview
* escape caption
* refactor images as div tags


= 0.2.6 =

* updates to sort, changed default sort unless specified
* shorten the topic feed


= 0.2.5 =

* added css and js code to have more fluid layout for preview
* changed esc_html to wp_kses in rendering of slide content
* vip review fixes


= 0.2.4 =

* Initial version for VIP Review, contains the following features:
  * hooked into json feed filters to extend and modify content for storyline feed
  * register mobile image sizes and include in json feed
  * custom post type 'storyline' created
  * custom taxonomy called "topics" (smrt-topic)
  * storyline post position and count added to json feed
  * post format added to feed for styling on client
  * support for ordering storylines via menu_order
  * show preview of post in post editor screen (on preview only)

